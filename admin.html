<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Child Protection Chatbot</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .chat-message {
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .typing-indicator {
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.4; }
            50% { opacity: 1; }
        }
        
        .admin-card {
            transition: all 0.3s ease;
        }
        
        .admin-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .language-toggle {
            transition: all 0.3s ease;
        }
        
        .language-toggle.active {
            background: #3b82f6;
            color: white;
        }
        
        .chat-container {
            height: calc(100vh - 120px);
            max-height: 600px;
        }
        
        .admin-sidebar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }
        
        .status-online { background: #10b981; }
        .status-offline { background: #ef4444; }
        
        .upload-zone {
            border: 2px dashed #d1d5db;
            transition: all 0.3s ease;
        }
        
        .upload-zone:hover,
        .upload-zone.drag-over {
            border-color: #3b82f6;
            background-color: #eff6ff;
        }
    </style>
</head>
<body class="bg-gray-100">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // API Base URL
        const API_BASE = '';

        // Main Admin App Component
        const AdminApp = () => {
            const [activeTab, setActiveTab] = useState('dashboard');
            const [faqs, setFaqs] = useState([]);
            const [chatHistory, setChatHistory] = useState([]);
            const [analytics, setAnalytics] = useState({});
            const [showAddModal, setShowAddModal] = useState(false);
            const [showChatModal, setShowChatModal] = useState(false);
            const [uploading, setUploading] = useState(false);
            const [newFAQ, setNewFAQ] = useState({ question: '', answer: '', language: 'en', category: 'general' });
            const [selectedFile, setSelectedFile] = useState(null);
            const [chatSessionId, setChatSessionId] = useState('');

            // Load initial data
            useEffect(() => {
                loadFaqs();
                loadAnalytics();
            }, []);

            const loadFaqs = async () => {
                try {
                    const response = await fetch(`${API_BASE}/api/faqs`);
                    const data = await response.json();
                    setFaqs(data);
                } catch (error) {
                    console.error('Error loading FAQs:', error);
                }
            };

            const loadAnalytics = async () => {
                try {
                    const response = await fetch(`${API_BASE}/api/analytics`);
                    const data = await response.json();
                    setAnalytics(data);
                } catch (error) {
                    console.error('Error loading analytics:', error);
                }
            };

            const addFAQ = async () => {
                try {
                    const response = await fetch(`${API_BASE}/api/faqs`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(newFAQ)
                    });
                    
                    if (response.ok) {
                        setShowAddModal(false);
                        setNewFAQ({ question: '', answer: '', language: 'en', category: 'general' });
                        loadFaqs();
                    }
                } catch (error) {
                    console.error('Error adding FAQ:', error);
                }
            };

            const deleteFAQ = async (id) => {
                if (confirm('Are you sure you want to delete this FAQ?')) {
                    try {
                        await fetch(`${API_BASE}/api/faqs/${id}`, { method: 'DELETE' });
                        loadFaqs();
                    } catch (error) {
                        console.error('Error deleting FAQ:', error);
                    }
                }
            };

            const uploadDocument = async () => {
                if (!selectedFile) return;
                
                setUploading(true);
                const formData = new FormData();
                formData.append('document', selectedFile);
                
                try {
                    const response = await fetch(`${API_BASE}/api/upload-document`, {
                        method: 'POST',
                        body: formData
                    });
                    
                    const result = await response.json();
                    alert(`Document processed! Extracted ${result.extracted_faqs} FAQs.`);
                    loadFaqs();
                    setSelectedFile(null);
                } catch (error) {
                    console.error('Error uploading document:', error);
                    alert('Error uploading document');
                } finally {
                    setUploading(false);
                }
            };

            return (
                <div className="min-h-screen bg-gray-100">
                    {/* Header */}
                    <header className="bg-white shadow-sm border-b">
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                            <div className="flex justify-between items-center h-16">
                                <div className="flex items-center">
                                    <i className="fas fa-shield-alt text-blue-600 text-2xl mr-3"></i>
                                    <h1 className="text-xl font-semibold text-gray-900">Child Protection Chatbot Admin</h1>
                                </div>
                                <div className="flex items-center space-x-4">
                                    <span className="text-sm text-gray-500">
                                        <span className="status-indicator status-online"></span>
                                        System Online
                                    </span>
                                    <a href="/" className="text-blue-600 hover:text-blue-800 text-sm">
                                        <i className="fas fa-external-link-alt mr-1"></i>
                                        View Chatbot
                                    </a>
                                </div>
                            </div>
                        </div>
                    </header>

                    <div className="flex">
                        {/* Sidebar */}
                        <div className="w-64 admin-sidebar min-h-screen p-6">
                            <nav>
                                <div className="space-y-2">
                                    <button
                                        onClick={() => setActiveTab('dashboard')}
                                        className={`w-full text-left px-4 py-3 rounded-lg transition-colors ${
                                            activeTab === 'dashboard' 
                                                ? 'bg-white bg-opacity-20 text-white' 
                                                : 'text-white hover:bg-white hover:bg-opacity-10'
                                        }`}
                                    >
                                        <i className="fas fa-chart-bar mr-3"></i>
                                        Dashboard
                                    </button>
                                    
                                    <button
                                        onClick={() => setActiveTab('faqs')}
                                        className={`w-full text-left px-4 py-3 rounded-lg transition-colors ${
                                            activeTab === 'faqs' 
                                                ? 'bg-white bg-opacity-20 text-white' 
                                                : 'text-white hover:bg-white hover:bg-opacity-10'
                                        }`}
                                    >
                                        <i className="fas fa-question-circle mr-3"></i>
                                        Manage FAQs
                                    </button>
                                    
                                    <button
                                        onClick={() => setActiveTab('chat')}
                                        className={`w-full text-left px-4 py-3 rounded-lg transition-colors ${
                                            activeTab === 'chat' 
                                                ? 'bg-white bg-opacity-20 text-white' 
                                                : 'text-white hover:bg-white hover:bg-opacity-10'
                                        }`}
                                    >
                                        <i className="fas fa-comments mr-3"></i>
                                        Test Chat
                                    </button>
                                    
                                    <button
                                        onClick={() => setActiveTab('documents')}
                                        className={`w-full text-left px-4 py-3 rounded-lg transition-colors ${
                                            activeTab === 'documents' 
                                                ? 'bg-white bg-opacity-20 text-white' 
                                                : 'text-white hover:bg-white hover:bg-opacity-10'
                                        }`}
                                    >
                                        <i className="fas fa-file-upload mr-3"></i>
                                        Upload Documents
                                    </button>
                                </div>
                            </nav>
                        </div>

                        {/* Main Content */}
                        <div className="flex-1 p-8">
                            {activeTab === 'dashboard' && <DashboardView analytics={analytics} />}
                            {activeTab === 'faqs' && <FAQsView faqs={faqs} onAdd={() => setShowAddModal(true)} onDelete={deleteFAQ} />}
                            {activeTab === 'chat' && <ChatTestView />}
                            {activeTab === 'documents' && (
                                <DocumentUploadView 
                                    uploading={uploading}
                                    selectedFile={selectedFile}
                                    onFileSelect={setSelectedFile}
                                    onUpload={uploadDocument}
                                />
                            )}
                        </div>
                    </div>

                    {/* Add FAQ Modal */}
                    {showAddModal && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                            <div className="bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto">
                                <h3 className="text-lg font-semibold mb-4">Add New FAQ</h3>
                                
                                <div className="space-y-4">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">Language</label>
                                        <select
                                            value={newFAQ.language}
                                            onChange={(e) => setNewFAQ({...newFAQ, language: e.target.value})}
                                            className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                        >
                                            <option value="en">English</option>
                                            <option value="ar">Arabic</option>
                                        </select>
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">Category</label>
                                        <select
                                            value={newFAQ.category}
                                            onChange={(e) => setNewFAQ({...newFAQ, category: e.target.value})}
                                            className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                        >
                                            <option value="general">General</option>
                                            <option value="emergency">Emergency</option>
                                            <option value="unaccompanied">Unaccompanied Children</option>
                                            <option value="psychosocial">Psychosocial Services</option>
                                            <option value="registration">Registration</option>
                                            <option value="complaints">Complaints</option>
                                            <option value="disabilities">Disabilities Support</option>
                                        </select>
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">Question</label>
                                        <textarea
                                            value={newFAQ.question}
                                            onChange={(e) => setNewFAQ({...newFAQ, question: e.target.value})}
                                            className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                            rows="3"
                                            placeholder="Enter the question..."
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">Answer</label>
                                        <textarea
                                            value={newFAQ.answer}
                                            onChange={(e) => setNewFAQ({...newFAQ, answer: e.target.value})}
                                            className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                            rows="5"
                                            placeholder="Enter the answer..."
                                        />
                                    </div>
                                </div>
                                
                                <div className="flex justify-end space-x-3 mt-6">
                                    <button
                                        onClick={() => setShowAddModal(false)}
                                        className="px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300"
                                    >
                                        Cancel
                                    </button>
                                    <button
                                        onClick={addFAQ}
                                        disabled={!newFAQ.question || !newFAQ.answer}
                                        className="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50"
                                    >
                                        Add FAQ
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // Dashboard View Component
        const DashboardView = ({ analytics }) => (
            <div className="space-y-6">
                <h2 className="text-2xl font-bold text-gray-900">Dashboard</h2>
                
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div className="admin-card bg-white p-6 rounded-lg shadow">
                        <div className="flex items-center">
                            <div className="p-3 bg-blue-100 rounded-full">
                                <i className="fas fa-question-circle text-blue-600 text-xl"></i>
                            </div>
                            <div className="ml-4">
                                <p className="text-sm text-gray-600">Total FAQs</p>
                                <p className="text-2xl font-semibold text-gray-900">{analytics.total_faqs || 0}</p>
                            </div>
                        </div>
                    </div>
                    
                    <div className="admin-card bg-white p-6 rounded-lg shadow">
                        <div className="flex items-center">
                            <div className="p-3 bg-green-100 rounded-full">
                                <i className="fas fa-comments text-green-600 text-xl"></i>
                            </div>
                            <div className="ml-4">
                                <p className="text-sm text-gray-600">Total Chats</p>
                                <p className="text-2xl font-semibold text-gray-900">{analytics.total_chats || 0}</p>
                            </div>
                        </div>
                    </div>
                    
                    <div className="admin-card bg-white p-6 rounded-lg shadow">
                        <div className="flex items-center">
                            <div className="p-3 bg-purple-100 rounded-full">
                                <i className="fas fa-globe text-purple-600 text-xl"></i>
                            </div>
                            <div className="ml-4">
                                <p className="text-sm text-gray-600">Languages</p>
                                <p className="text-2xl font-semibold text-gray-900">{(analytics.language_distribution || []).length}</p>
                            </div>
                        </div>
                    </div>
                    
                    <div className="admin-card bg-white p-6 rounded-lg shadow">
                        <div className="flex items-center">
                            <div className="p-3 bg-orange-100 rounded-full">
                                <i className="fas fa-tags text-orange-600 text-xl"></i>
                            </div>
                            <div className="ml-4">
                                <p className="text-sm text-gray-600">Categories</p>
                                <p className="text-2xl font-semibold text-gray-900">{(analytics.category_distribution || []).length}</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div className="admin-card bg-white p-6 rounded-lg shadow">
                        <h3 className="text-lg font-semibold mb-4">Language Distribution</h3>
                        <div className="space-y-3">
                            {(analytics.language_distribution || []).map(lang => (
                                <div key={lang.language} className="flex justify-between items-center">
                                    <span className="text-sm text-gray-600 capitalize">{lang.language === 'ar' ? 'Arabic' : 'English'}</span>
                                    <div className="flex items-center">
                                        <div className="w-24 bg-gray-200 rounded-full h-2 mr-3">
                                            <div 
                                                className="bg-blue-600 h-2 rounded-full" 
                                                style={{width: `${(lang.count / (analytics.total_faqs || 1)) * 100}%`}}
                                            ></div>
                                        </div>
                                        <span className="text-sm font-medium">{lang.count}</span>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                    
                    <div className="admin-card bg-white p-6 rounded-lg shadow">
                        <h3 className="text-lg font-semibold mb-4">Category Distribution</h3>
                        <div className="space-y-3">
                            {(analytics.category_distribution || []).map(cat => (
                                <div key={cat.category} className="flex justify-between items-center">
                                    <span className="text-sm text-gray-600 capitalize">{cat.category}</span>
                                    <div className="flex items-center">
                                        <div className="w-24 bg-gray-200 rounded-full h-2 mr-3">
                                            <div 
                                                className="bg-green-600 h-2 rounded-full" 
                                                style={{width: `${(cat.count / (analytics.total_faqs || 1)) * 100}%`}}
                                            ></div>
                                        </div>
                                        <span className="text-sm font-medium">{cat.count}</span>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            </div>
        );

        // FAQs View Component
        const FAQsView = ({ faqs, onAdd, onDelete }) => {
            const [filter, setFilter] = useState({ language: 'all', category: 'all' });
            
            const filteredFaqs = faqs.filter(faq => {
                return (filter.language === 'all' || faq.language === filter.language) &&
                       (filter.category === 'all' || faq.category === filter.category);
            });

            return (
                <div className="space-y-6">
                    <div className="flex justify-between items-center">
                        <h2 className="text-2xl font-bold text-gray-900">Manage FAQs</h2>
                        <button
                            onClick={onAdd}
                            className="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center"
                        >
                            <i className="fas fa-plus mr-2"></i>
                            Add FAQ
                        </button>
                    </div>
                    
                    <div className="bg-white rounded-lg shadow">
                        <div className="p-6 border-b border-gray-200">
                            <div className="flex space-x-4">
                                <select
                                    value={filter.language}
                                    onChange={(e) => setFilter({...filter, language: e.target.value})}
                                    className="px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                >
                                    <option value="all">All Languages</option>
                                    <option value="en">English</option>
                                    <option value="ar">Arabic</option>
                                </select>
                                
                                <select
                                    value={filter.category}
                                    onChange={(e) => setFilter({...filter, category: e.target.value})}
                                    className="px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                >
                                    <option value="all">All Categories</option>
                                    <option value="general">General</option>
                                    <option value="emergency">Emergency</option>
                                    <option value="unaccompanied">Unaccompanied Children</option>
                                    <option value="psychosocial">Psychosocial Services</option>
                                    <option value="registration">Registration</option>
                                    <option value="complaints">Complaints</option>
                                    <option value="disabilities">Disabilities Support</option>
                                </select>
                            </div>
                        </div>
                        
                        <div className="divide-y divide-gray-200 max-h-96 overflow-y-auto">
                            {filteredFaqs.map(faq => (
                                <div key={faq.id} className="p-6 hover:bg-gray-50">
                                    <div className="flex justify-between items-start">
                                        <div className="flex-1">
                                            <div className="flex items-center space-x-3 mb-2">
                                                <span className={`px-2 py-1 text-xs rounded-full ${
                                                    faq.language === 'ar' ? 'bg-green-100 text-green-800' : 'bg-blue-100 text-blue-800'
                                                }`}>
                                                    {faq.language === 'ar' ? 'عربي' : 'English'}
                                                </span>
                                                <span className="px-2 py-1 text-xs bg-gray-100 text-gray-800 rounded-full capitalize">
                                                    {faq.category}
                                                </span>
                                            </div>
                                            <h4 className="font-medium text-gray-900 mb-2">{faq.question}</h4>
                                            <p className="text-gray-600 text-sm">{faq.answer.substring(0, 150)}...</p>
                                        </div>
                                        <button
                                            onClick={() => onDelete(faq.id)}
                                            className="text-red-600 hover:text-red-800 ml-4"
                                        >
                                            <i className="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        // Chat Test View Component
        const ChatTestView = () => {
            const [messages, setMessages] = useState([]);
            const [inputMessage, setInputMessage] = useState('');
            const [sessionId, setSessionId] = useState('');
            const [isTyping, setIsTyping] = useState(false);

            const sendMessage = async () => {
                if (!inputMessage.trim()) return;

                const userMessage = { type: 'user', content: inputMessage, timestamp: new Date() };
                setMessages(prev => [...prev, userMessage]);
                setInputMessage('');
                setIsTyping(true);

                try {
                    const response = await fetch(`${API_BASE}/api/chat`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ 
                            message: inputMessage, 
                            session_id: sessionId 
                        })
                    });

                    const data = await response.json();
                    setSessionId(data.session_id);
                    
                    const botMessage = { 
                        type: 'bot', 
                        content: data.response, 
                        confidence: data.confidence,
                        language: data.language,
                        timestamp: new Date() 
                    };
                    
                    setMessages(prev => [...prev, botMessage]);
                } catch (error) {
                    console.error('Error sending message:', error);
                } finally {
                    setIsTyping(false);
                }
            };

            const handleKeyPress = (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            };

            return (
                <div className="space-y-6">
                    <h2 className="text-2xl font-bold text-gray-900">Test Chatbot</h2>
                    
                    <div className="bg-white rounded-lg shadow">
                        <div className="p-6 border-b border-gray-200">
                            <div className="flex items-center justify-between">
                                <h3 className="text-lg font-semibold">Live Chat Test</h3>
                                <div className="flex space-x-2">
                                    <button
                                        onClick={() => setMessages([])}
                                        className="text-sm text-gray-600 hover:text-gray-800"
                                    >
                                        Clear Chat
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div className="chat-container p-6 bg-gray-50">
                            <div className="space-y-4 max-h-full overflow-y-auto">
                                {messages.map((message, index) => (
                                    <div
                                        key={index}
                                        className={`flex ${message.type === 'user' ? 'justify-end' : 'justify-start'}`}
                                    >
                                        <div
                                            className={`max-w-xs lg:max-w-md px-4 py-2 rounded-lg chat-message ${
                                                message.type === 'user'
                                                    ? 'bg-blue-600 text-white'
                                                    : 'bg-white text-gray-900 shadow-sm'
                                            }`}
                                        >
                                            <p className="text-sm">{message.content}</p>
                                            <p className={`text-xs mt-1 ${
                                                message.type === 'user' ? 'text-blue-100' : 'text-gray-500'
                                            }`}>
                                                {message.timestamp.toLocaleTimeString()}
                                            </p>
                                        </div>
                                    </div>
                                ))}
                                
                                {isTyping && (
                                    <div className="flex justify-start">
                                        <div className="bg-white text-gray-900 px-4 py-2 rounded-lg shadow-sm">
                                            <div className="typing-indicator">
                                                <span className="text-sm text-gray-500">Bot is typing...</span>
                                            </div>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                        
                        <div className="p-4 border-t border-gray-200">
                            <div className="flex space-x-2">
                                <textarea
                                    value={inputMessage}
                                    onChange={(e) => setInputMessage(e.target.value)}
                                    onKeyPress={handleKeyPress}
                                    placeholder="Type your message here..."
                                    className="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    rows="2"
                                />
                                <button
                                    onClick={sendMessage}
                                    disabled={!inputMessage.trim() || isTyping}
                                    className="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50"
                                >
                                    <i className="fas fa-paper-plane"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Document Upload View Component
        const DocumentUploadView = ({ uploading, selectedFile, onFileSelect, onUpload }) => {
            const handleDragOver = (e) => {
                e.preventDefault();
                e.target.closest('.upload-zone').classList.add('drag-over');
            };

            const handleDragLeave = (e) => {
                e.preventDefault();
                e.target.closest('.upload-zone').classList.remove('drag-over');
            };

            const handleDrop = (e) => {
                e.preventDefault();
                e.target.closest('.upload-zone').classList.remove('drag-over');
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    onFileSelect(files[0]);
                }
            };

            return (
                <div className="space-y-6">
                    <h2 className="text-2xl font-bold text-gray-900">Upload Documents</h2>
                    
                    <div className="bg-white rounded-lg shadow p-6">
                        <div className="mb-6">
                            <h3 className="text-lg font-semibold mb-2">Supported Formats</h3>
                            <div className="flex space-x-4 text-sm text-gray-600">
                                <span><i className="fas fa-file-pdf text-red-500 mr-1"></i> PDF</span>
                                <span><i className="fas fa-file-word text-blue-500 mr-1"></i> DOCX</span>
                                <span><i className="fas fa-file-alt text-gray-500 mr-1"></i> TXT</span>
                            </div>
                        </div>
                        
                        <div
                            className="upload-zone rounded-lg p-8 text-center cursor-pointer"
                            onDragOver={handleDragOver}
                            onDragLeave={handleDragLeave}
                            onDrop={handleDrop}
                            onClick={() => document.getElementById('file-input').click()}
                        >
                            <input
                                id="file-input"
                                type="file"
                                accept=".pdf,.docx,.txt"
                                onChange={(e) => onFileSelect(e.target.files[0])}
                                className="hidden"
                            />
                            
                            <div className="space-y-4">
                                <div className="mx-auto w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center">
                                    <i className="fas fa-cloud-upload-alt text-2xl text-gray-400"></i>
                                </div>
                                
                                {selectedFile ? (
                                    <div>
                                        <p className="text-lg font-medium text-gray-900">{selectedFile.name}</p>
                                        <p className="text-sm text-gray-500">
                                            {(selectedFile.size / 1024 / 1024).toFixed(2)} MB
                                        </p>
                                    </div>
                                ) : (
                                    <div>
                                        <p className="text-lg font-medium text-gray-900">
                                            Drop your document here or click to browse
                                        </p>
                                        <p className="text-sm text-gray-500">
                                            The system will automatically extract Q&A pairs
                                        </p>
                                    </div>
                                )}
                            </div>
                        </div>
                        
                        {selectedFile && (
                            <div className="mt-6 flex justify-center">
                                <button
                                    onClick={onUpload}
                                    disabled={uploading}
                                    className="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center"
                                >
                                    {uploading ? (
                                        <>
                                            <i className="fas fa-spinner fa-spin mr-2"></i>
                                            Processing...
                                        </>
                                    ) : (
                                        <>
                                            <i className="fas fa-upload mr-2"></i>
                                            Upload & Extract
                                        </>
                                    )}
                                </button>
                            </div>
                        )}
                    </div>
                    
                    <div className="bg-blue-50 border border-blue-200 rounded-lg p-4">
                        <div className="flex">
                            <div className="ml-3">
                                <h3 className="text-sm font-medium text-blue-800">
                                    How it works
                                </h3>
                                <div className="mt-2 text-sm text-blue-700">
                                    <ul className="list-disc pl-5 space-y-1">
                                        <li>Upload documents containing questions and answers</li>
                                        <li>Our AI will automatically extract Q&A pairs</li>
                                        <li>Extracted FAQs will be added to your knowledge base</li>
                                        <li>You can review and edit them in the FAQ management section</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Render the app
        ReactDOM.render(<AdminApp />, document.getElementById('root'));
    </script>
</body>
</html>